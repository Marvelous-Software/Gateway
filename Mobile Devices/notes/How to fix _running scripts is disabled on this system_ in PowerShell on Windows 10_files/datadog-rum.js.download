!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";n.r(t),n.d(t,"datadogRum",(function(){return ln})),n.d(t,"makeRumGlobal",(function(){return pn}));var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function o(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r}var a,u,s,c=6e4,f=60*c;function d(e,t,n){var r,i=!n||void 0===n.leading||n.leading,o=!n||void 0===n.trailing||n.trailing,a=!1,u=!1;return{throttled:function(){var n=this;a?u=!0:(i?e.apply(this):u=!0,a=!0,r=window.setTimeout((function(){o&&u&&e.apply(n),a=!1,u=!1}),t))},cancel:function(){window.clearTimeout(r),a=!1,u=!1}}}!function(e){e.BEFORE_UNLOAD="beforeunload",e.CLICK="click",e.KEY_DOWN="keydown",e.LOAD="load",e.POP_STATE="popstate",e.SCROLL="scroll",e.TOUCH_START="touchstart",e.VISIBILITY_CHANGE="visibilitychange"}(a||(a={})),function(e){e.DOCUMENT="document",e.XHR="xhr",e.BEACON="beacon",e.FETCH="fetch",e.CSS="css",e.JS="js",e.IMAGE="image",e.FONT="font",e.MEDIA="media",e.OTHER="other"}(u||(u={})),function(e){e.FETCH="fetch",e.XHR="xhr"}(s||(s={}));var l,p,m=function(e){return Array.isArray(e)},v=function(e){return!Array.isArray(e)&&"object"==typeof e};function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(e,t){return m(e)&&m(t)?o(Array(Math.max(e.length,t.length))).map((function(n,r){return h(e[r],t[r])})):v(e)&&v(t)?Object.keys(t).reduce((function(n,i){var o;return r(r({},n),((o={})[i]=h(e[i],t[i]),o))}),e):void 0===t?e:t}),e)}function E(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return h.apply(void 0,o([e],t))}function T(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))}function g(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):(1e7+"-1000-4000-8000-100000000000").replace(/[018]/g,g)}function b(e){return 0!==e&&100*Math.random()<=e}function y(e){return"number"!=typeof e?e:+(1e6*e).toFixed(0)}function C(e){var t={};return Object.keys(e).forEach((function(n){var r;t[(r=n,r.replace(/[A-Z]/g,(function(e,t){return(0!==t?"_":"")+e.toLowerCase()})).replace(/-/g,"_"))]=function e(t){if(Array.isArray(t))return t.map((function(t){return e(t)}));if("object"==typeof t)return C(t);return t}(e[n])})),t}function O(){}function R(e,t,n){if(null==e)return JSON.stringify(e);var r=[!1,void 0];_(e)&&(r=[!0,e.toJSON],delete e.toJSON);var i,o,a=[!1,void 0];"object"==typeof e&&_(i=Object.getPrototypeOf(e))&&(a=[!0,i.toJSON],delete i.toJSON);try{o=JSON.stringify(e,void 0,n)}catch(e){o="<error: unable to serialize object>"}finally{r[0]&&(e.toJSON=r[1]),a[0]&&(i.toJSON=a[1])}return o}function _(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("toJSON")}function w(e,t){return-1!==e.indexOf(t)}function S(e){return I(e)&&e>=0&&e<=100}function I(e){return"number"==typeof e}function A(e){return Math.floor(D()+e)}function D(){return void 0===l&&(l=performance.timing.navigationStart),l}function L(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+t}function x(e,t){var n=e.match("(?:^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return n?n[1]:void 0}function N(e){return k(e,L(window.location)).href}function M(e,t){return U(e)===U(t)}function U(e){return L(k(e))}function k(e,t){if(function(){if(void 0!==p)return p;try{var e=new URL("http://test/path");return p="http://test/path"===e.href}catch(e){p=!1}return p}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '"+e+"'");var n=document,r=n.createElement("a");if(void 0!==t){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,n.head.appendChild(i),n.body.appendChild(r)}return r.href=e,r}var B={allowedTracingOrigins:[],isCollectingError:!0,maxErrorsByMinute:3e3,maxInternalMonitoringMessagesPerPage:15,resourceSampleRate:100,sampleRate:100,silentMultipleInit:!1,trackInteractions:!1,requestErrorResponseLengthLimit:32768,flushTimeout:3e4,maxBatchSize:50,maxMessageSize:262144,batchBytesLimit:16384};function H(e,t,n){var r="sdk_version:"+t.sdkVersion+(t.env?",env:"+t.env:"")+(t.service?",service:"+t.service:"")+(t.version?",version:"+t.version:""),i=e+"-http-intake.logs."+t.site,o=t.proxyHost?t.proxyHost:i,a=t.proxyHost?"ddhost="+i+"&":"",u=""+(t.applicationId?"_dd.application_id="+t.applicationId+"&":"")+a+"ddsource="+(n||"browser")+"&ddtags="+r;return"https://"+o+"/v1/input/"+t.clientToken+"?"+u}function P(e,t){return M(e,t.logsEndpoint)||M(e,t.rumEndpoint)||M(e,t.traceEndpoint)||t.internalMonitoringEndpoint&&M(e,t.internalMonitoringEndpoint)||t.proxyHost&&M(e,t.proxyHost)||t.replica&&(M(e,t.replica.logsEndpoint)||M(e,t.replica.rumEndpoint)||M(e,t.replica.internalMonitoringEndpoint))}var j=1e3;function F(e,t,n){var r=new Date;r.setTime(r.getTime()+n);var i="expires="+r.toUTCString();document.cookie=e+"="+t+";"+i+";path=/;samesite=strict"}function W(e){return x(document.cookie,e)}var q="?",z=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var V=function(){var e,t,n,r,i,o,a=[];function u(e,t,n){var r;for(var i in a)if(G(a,i))try{a[i](e,t,n)}catch(e){r=e}if(r)throw r}function s(e,r,i,o,a){if(t)K.augmentStackTraceWithInitialElement(t,r,i,""+e),f();else if(a)u(K(a),!0,a);else{var s,c={url:r,column:o,line:i},d=e;if("[object String]"==={}.toString.call(e)){var l=d.match(z);l&&(s=l[1],d=l[2])}u({name:s,message:d,stack:[c]},!0)}return!!n&&n.apply(this,arguments)}function c(e){var t=e.reason||"Empty reason";u(K(t),!0,t)}function f(){var n=t,r=e;t=void 0,e=void 0,u(n,!1,r)}function d(n){if(t){if(e===n)return;f()}var r=K(n);throw t=r,e=n,setTimeout((function(){e===n&&f()}),r.incomplete?2e3:0),n}return d.subscribe=function(e){!function(){if(r)return;n=window.onerror,window.onerror=re(s),r=!0}(),function(){if(o)return;i=null!==window.onunhandledrejection?window.onunhandledrejection:void 0,window.onunhandledrejection=re(c),o=!0}(),a.push(e)},d.unsubscribe=function(e){for(var t=a.length-1;t>=0;t-=1)a[t]===e&&a.splice(t,1);0===a.length&&(r&&(window.onerror=n,r=!1),o&&(window.onunhandledrejection=i,o=!1))},d.traceKitWindowOnError=s,d}(),K=function(){var e=!1;function t(e){if(e.stack){for(var t,n,r,i,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,f=e.stack.split("\n"),d=[],l=0,p=f.length;l<p;l+=1){if(o.exec(f[l])){var m=(r=o.exec(f[l]))[2]&&0===r[2].indexOf("native");t=r[2]&&0===r[2].indexOf("eval"),n=c.exec(r[2]),t&&n&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),i={args:m?[r[2]]:[],column:r[4]?+r[4]:void 0,func:r[1]||q,line:r[3]?+r[3]:void 0,url:m?void 0:r[2]}}else if(u.exec(f[l]))i={args:[],column:(r=u.exec(f[l]))[4]?+r[4]:void 0,func:r[1]||q,line:+r[3],url:r[2]};else{if(!a.exec(f[l]))continue;t=(r=a.exec(f[l]))[3]&&r[3].indexOf(" > eval")>-1,n=s.exec(r[3]),t&&n?(r[3]=n[1],r[4]=n[2],r[5]=void 0):0!==l||r[5]||void 0===e.columnNumber||(d[0].column=e.columnNumber+1),i={args:r[2]?r[2].split(","):[],column:r[5]?+r[5]:void 0,func:r[1]||q,line:r[4]?+r[4]:void 0,url:r[3]}}!i.func&&i.line&&(i.func=q),d.push(i)}if(d.length)return{stack:d,message:e.message,name:e.name}}}function n(e,t,n,r){var i={url:t,line:n?+n:void 0};if(i.url&&i.line){e.incomplete=!1;var o=e.stack;if(o.length>0&&o[0].url===i.url){if(o[0].line===i.line)return!1;if(!o[0].line&&o[0].func===i.func)return o[0].line=i.line,o[0].context=i.context,!1}return o.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function r(e,t){for(var i,o,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],s={},c=!1,f=r.caller;f&&!c;f=f.caller)f!==K&&f!==V&&(o={args:[],column:void 0,func:q,line:void 0,url:void 0},i=a.exec(f.toString()),f.name?o.func=f.name:i&&(o.func=i[1]),void 0===o.func&&(o.func=i?i.input.substring(0,i.input.indexOf("{")):void 0),s[""+f]?c=!0:s[""+f]=!0,u.push(o));t&&u.splice(0,t);var d={stack:u,message:e.message,name:e.name};return n(d,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),d}function i(n,i){var o,a=void 0===i?0:+i;try{if(o=function(e){var t=e.stacktrace;if(t){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=t.split("\n"),a=[],u=0;u<o.length;u+=2){var s=void 0;r.exec(o[u])?s={args:[],column:void 0,func:(n=r.exec(o[u]))[3],line:+n[1],url:n[2]}:i.exec(o[u])&&(s={args:(n=i.exec(o[u]))[5]?n[5].split(","):[],column:+n[2],func:n[3]||n[4],line:+n[1],url:n[6]}),s&&(!s.func&&s.line&&(s.func=q),s.context=[o[u+1]],a.push(s))}if(a.length)return{stack:a,message:e.message,name:e.name}}}(n))return o}catch(t){if(e)throw t}try{if(o=t(n))return o}catch(t){if(e)throw t}try{if(o=function(e){var t=e.message.split("\n");if(!(t.length<4)){var n,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,a=[],u=window&&window.document&&window.document.getElementsByTagName("script"),s=[];for(var c in u)G(u,c)&&!u[c].src&&s.push(u[c]);for(var f=2;f<t.length;f+=2){var d=void 0;if(r.exec(t[f]))d={args:[],column:void 0,func:(n=r.exec(t[f]))[3],line:+n[1],url:n[2]};else if(i.exec(t[f]))d={args:[],column:void 0,func:(n=i.exec(t[f]))[4],line:+n[1],url:n[3]};else if(o.exec(t[f])){n=o.exec(t[f]),d={url:window.location.href.replace(/#.*$/,""),args:[],column:void 0,func:"",line:+n[1]}}d&&(d.func||(d.func=q),d.context=[t[f+1]],a.push(d))}if(a.length)return{stack:a,message:t[0],name:e.name}}}(n))return o}catch(t){if(e)throw t}try{if(o=r(n,a+1))return o}catch(t){if(e)throw t}return{message:n.message,name:n.name,stack:[]}}return i.augmentStackTraceWithInitialElement=n,i.computeStackTraceFromStackProp=t,i.ofCaller=function(e){var t=1+(void 0===e?0:+e);try{throw new Error}catch(e){return K(e,t+1)}},i}();var $=/[^\u0000-\u007F]/,X=function(){function e(e,t,n){void 0===n&&(n=!1),this.endpointUrl=e,this.bytesLimit=t,this.withBatchTime=n}return e.prototype.send=function(e,t){var n=this.withBatchTime?function(e){return e+(-1===e.indexOf("?")?"?":"&")+"batch_time="+(new Date).getTime()}(this.endpointUrl):this.endpointUrl;if(navigator.sendBeacon&&t<this.bytesLimit&&navigator.sendBeacon(n,e))return;var r=new XMLHttpRequest;r.open("POST",n,!0),r.send(e)},e}();var Y,J=function(){function e(e,t,n,r,i,o){void 0===o&&(o=O),this.request=e,this.maxSize=t,this.bytesLimit=n,this.maxMessageSize=r,this.flushTimeout=i,this.beforeUnloadCallback=o,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(){if(0!==this.bufferMessageCount){var e=o(this.pushOnlyBuffer,(t=this.upsertBuffer,n=[],Object.keys(t).forEach((function(e){n.push(t[e])})),n));this.request.send(e.join("\n"),this.bufferBytesSize),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0}var t,n},e.prototype.sizeInBytes=function(e){return $.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,i=n.messageBytesSize;i>=this.maxMessageSize?console.warn("Discarded a message whose size was bigger than the maximum allowed size "+this.maxMessageSize+"KB."):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(r,i,t),this.isFull()&&this.flush())},e.prototype.process=function(e){var t=R(e);return{processedMessage:t,messageBytesSize:this.sizeInBytes(t)}},e.prototype.push=function(e,t,n){this.bufferMessageCount>0&&(this.bufferBytesSize+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesSize+=t,this.bufferMessageCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.sizeInBytes(t);this.bufferBytesSize-=n,this.bufferMessageCount-=1,this.bufferMessageCount>0&&(this.bufferBytesSize-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesSize+e+1>=this.bytesLimit},e.prototype.isFull=function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout((function(){e.flush(),e.flushPeriodically()}),this.flushTimeout)},e.prototype.flushOnVisibilityHidden=function(){var e=this;navigator.sendBeacon&&(window.addEventListener(a.BEFORE_UNLOAD,re(this.beforeUnloadCallback)),document.addEventListener(a.VISIBILITY_CHANGE,re((function(){"hidden"===document.visibilityState&&e.flush()}))),window.addEventListener(a.BEFORE_UNLOAD,re((function(){return e.flush()}))))},e}();!function(e){e.info="info",e.error="error"}(Y||(Y={}));var Q,Z,ee,te={maxMessagesPerPage:0,sentMessageCount:0};function ne(e){if(e.internalMonitoringEndpoint){var t=function(e){var t,n=r(e.internalMonitoringEndpoint);void 0!==e.replica&&(t=r(e.replica.internalMonitoringEndpoint));function r(t){return new J(new X(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}return{add:function(e){var r=function(e){return h({date:(new Date).getTime(),view:{referrer:document.referrer,url:window.location.href}},void 0!==Q?Q():{},e)}(e);n.add(r),t&&t.add(r)}}}(e);T(te,{batch:t,maxMessagesPerPage:e.maxInternalMonitoringMessagesPerPage,sentMessageCount:0})}return{setExternalContextProvider:function(e){Q=e}}}function re(e){return function(){try{return e.apply(this,arguments)}catch(e){se(e);try{oe(e)}catch(e){se(e)}}}}function ie(e,t){!function(e){te.debugMode&&console.log("[MONITORING MESSAGE]",e)}(e),ae(r(r({message:e},t),{status:Y.info}))}function oe(e){ae(r(r({},function(e){if(e instanceof Error){var t=K(e);return{error:{kind:t.name,stack:Se(t)},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught "+R(e)}}(e)),{status:Y.error}))}function ae(e){te.batch&&te.sentMessageCount<te.maxMessagesPerPage&&(te.sentMessageCount+=1,te.batch.add(e))}function ue(e){te.debugMode=e}function se(e){te.debugMode&&console.warn("[INTERNAL ERROR]",e)}var ce=[],fe=[];function de(){return Z||(!function(){if(!window.fetch)return;ee=window.fetch,window.fetch=re((function(e,t){var n=this,r=t&&t.method||"object"==typeof e&&e.method||"GET",o=N("object"==typeof e&&e.url||e),a={init:t,method:r,startTime:performance.now(),url:o},u=function(e){return t=n,r=void 0,u=function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return a.duration=performance.now()-a.startTime,"stack"in e||e instanceof Error?(a.status=0,a.response=Se(K(e)),fe.forEach((function(e){return e(a)})),[3,6]):[3,1];case 1:if(!("status"in e))return[3,6];t=void 0,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.clone().text()];case 3:return t=r.sent(),[3,5];case 4:return n=r.sent(),t="Unable to retrieve response: "+n,[3,5];case 5:a.response=t,a.responseType=e.type,a.status=e.status,fe.forEach((function(e){return e(a)})),r.label=6;case 6:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function i(e){try{s(u.next(e))}catch(e){n(e)}}function a(e){try{s(u.throw(e))}catch(e){n(e)}}function s(t){t.done?e(t.value):new o((function(e){e(t.value)})).then(i,a)}s((u=u.apply(t,r||[])).next())}));var t,r,o,u};ce.forEach((function(e){return e(a)}));var s=ee.call(this,e,a.init);return s.then(re(u),re(u)),s}))}(),Z={beforeSend:function(e){ce.push(e)},onRequestComplete:function(e){fe.push(e)}}),Z}var le,pe,me,ve,he,Ee,Te,ge,be,ye=function(){function e(){this.observers=[]}return e.prototype.subscribe=function(e){this.observers.push(e)},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}(),Ce=[],Oe=[];function Re(){return le||(pe=XMLHttpRequest.prototype.open,me=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=re((function(e,t){return this._datadog_xhr={method:e,url:N(t)},pe.apply(this,arguments)})),XMLHttpRequest.prototype.send=re((function(e){var t=this;if(this._datadog_xhr){this._datadog_xhr.startTime=performance.now();var n=this.onreadystatechange;this.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&re(i)(),n&&n.apply(this,arguments)};var r=!1,i=function(){r||(r=!0,t._datadog_xhr.duration=performance.now()-t._datadog_xhr.startTime,t._datadog_xhr.response=t.response,t._datadog_xhr.status=t.status,Oe.forEach((function(e){return e(t._datadog_xhr)})))};this.addEventListener("loadend",re(i)),Ce.forEach((function(e){return e(t._datadog_xhr,t)}))}return me.apply(this,arguments)})),le={beforeSend:function(e){Ce.push(e)},onRequestComplete:function(e){Oe.push(e)}}),le}function _e(e){if(!he){var t=new ye;e.isCollectingError&&(function(e,t){function n(n,r){P(r.url,e)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!function(e){return e.status>=500}(r)||t.notify({context:{error:{origin:ve.NETWORK,stack:Ie(r.response,e)||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url}},message:Ae(n)+" error "+r.method+" "+r.url,startTime:r.startTime})}Re().onRequestComplete((function(e){return n(s.XHR,e)})),de().onRequestComplete((function(e){return n(s.FETCH,e)}))}(e,t),function(e){Ee=console.error,console.error=re((function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ee.apply(console,o([t],n)),e.notify({context:{error:{origin:ve.CONSOLE}},message:o(["console error:",t],n).map(we).join(" "),startTime:performance.now()})}))}(t),function(e){Te=function(t,n,r){e.notify(function(e,t){var n,r;void 0!==e.message||t instanceof Error?(n=e.message||"Empty message",r=Se(e)):(n="Uncaught "+R(t),r="No stack, consider using an instance of Error");return{message:n,context:{error:{stack:r,kind:e.name,origin:ve.SOURCE}},startTime:performance.now()}}(t,r))},V.subscribe(Te)}(t)),he=function(e,t){var n=0,r=new ye;return t.subscribe((function(t){n<e.maxErrorsByMinute?(n+=1,r.notify(t)):n===e.maxErrorsByMinute&&(n+=1,r.notify({context:{error:{origin:ve.AGENT}},message:"Reached max number of errors by minute: "+e.maxErrorsByMinute,startTime:performance.now()}))})),setInterval((function(){return n=0}),c),r}(e,t)}return he}function we(e){return"string"==typeof e?e:e instanceof Error?Se(K(e)):R(e,0,2)}function Se(e){var t=(e.name||"Error")+": "+e.message;return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",i=e.line?":"+e.line:"",o=e.line&&e.column?":"+e.column:"";t+="\n  at "+n+r+" @ "+e.url+i+o})),t}function Ie(e,t){return e&&e.length>t.requestErrorResponseLengthLimit?e.substring(0,t.requestErrorResponseLengthLimit)+"...":e}function Ae(e){return s.XHR===e?"XHR":"Fetch"}function De(e){console.warn("'"+e+"' not yet available, please call '.init()' first.")}!function(e){e.AGENT="agent",e.CONSOLE="console",e.NETWORK="network",e.SOURCE="source",e.LOGGER="logger"}(ve||(ve={})),function(e){e.US="us",e.EU="eu"}(be||(be={}));var Le,xe=((ge={})[be.EU]="datadoghq.eu",ge[be.US]="datadoghq.com",ge);function Ne(e,t){var n=function(e,t){var n={applicationId:e.applicationId,buildMode:t.buildMode,clientToken:e.clientToken,env:e.env,proxyHost:e.proxyHost,sdkVersion:t.sdkVersion,service:e.service,site:e.site||xe[e.datacenter||t.datacenter],version:e.version},i=Array.isArray(e.enableExperimentalFeatures)?e.enableExperimentalFeatures:[],o=r({isEnabled:function(e){return w(i,e)},logsEndpoint:H("browser",n),proxyHost:e.proxyHost,rumEndpoint:H("rum",n),traceEndpoint:H("public-trace",n)},B);if(e.internalMonitoringApiKey&&(o.internalMonitoringEndpoint=H("browser",n,"browser-agent-internal-monitoring")),"allowedTracingOrigins"in e&&(o.allowedTracingOrigins=e.allowedTracingOrigins),"isCollectingError"in e&&(o.isCollectingError=!!e.isCollectingError),"sampleRate"in e&&(o.sampleRate=e.sampleRate),"resourceSampleRate"in e&&(o.resourceSampleRate=e.resourceSampleRate),"trackInteractions"in e&&(o.trackInteractions=!!e.trackInteractions),n.buildMode===Le.E2E_TEST&&(void 0!==e.internalMonitoringEndpoint&&(o.internalMonitoringEndpoint=e.internalMonitoringEndpoint),void 0!==e.logsEndpoint&&(o.logsEndpoint=e.logsEndpoint),void 0!==e.rumEndpoint&&(o.rumEndpoint=e.rumEndpoint)),n.buildMode===Le.STAGING&&void 0!==e.replica){var a=r(r({},n),{applicationId:e.replica.applicationId,clientToken:e.replica.clientToken,site:xe[be.US]});o.replica={applicationId:e.replica.applicationId,internalMonitoringEndpoint:H("browser",a,"browser-agent-internal-monitoring"),logsEndpoint:H("browser",a),rumEndpoint:H("rum",a)}}return o}(e,t),i=ne(n);return{configuration:n,errorObservable:_e(n),internalMonitoring:i}}function Me(){return!!function(){if(void 0===document.cookie||null===document.cookie)return!1;try{return F("dd_rum_test","test",1e3),"test"===W("dd_rum_test")}catch(e){return console.error(e),!1}}()||(console.warn("Cookies are not authorized, we will not send any data."),!1)}function Ue(){return"file:"!==window.location.protocol||(console.error("Execution is not allowed in the current context."),!1)}!function(e){e.RELEASE="release",e.STAGING="staging",e.E2E_TEST="e2e-test"}(Le||(Le={}));var ke,Be={buildMode:"release",datacenter:"us",sdkVersion:"1.18.0"};!function(e){e[e.ERROR_COLLECTED=0]="ERROR_COLLECTED",e[e.PERFORMANCE_ENTRY_COLLECTED=1]="PERFORMANCE_ENTRY_COLLECTED",e[e.CUSTOM_ACTION_COLLECTED=2]="CUSTOM_ACTION_COLLECTED",e[e.AUTO_ACTION_CREATED=3]="AUTO_ACTION_CREATED",e[e.AUTO_ACTION_COMPLETED=4]="AUTO_ACTION_COMPLETED",e[e.AUTO_ACTION_DISCARDED=5]="AUTO_ACTION_DISCARDED",e[e.VIEW_CREATED=6]="VIEW_CREATED",e[e.VIEW_UPDATED=7]="VIEW_UPDATED",e[e.REQUEST_STARTED=8]="REQUEST_STARTED",e[e.REQUEST_COMPLETED=9]="REQUEST_COMPLETED",e[e.SESSION_RENEWED=10]="SESSION_RENEWED",e[e.RESOURCE_ADDED_TO_BATCH=11]="RESOURCE_ADDED_TO_BATCH",e[e.DOM_MUTATED=12]="DOM_MUTATED",e[e.BEFORE_UNLOAD=13]="BEFORE_UNLOAD"}(ke||(ke={}));var He=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter((function(e){return t!==e}))}}},e}();function Pe(e){var t,n=function(){var e,t=window;if(t.Zone){var n=t.Zone.__symbol__("MutationObserver");e=t[n]}return e||(e=t.MutationObserver),e}();return n&&(t=new n(re((function(){e.notify(ke.DOM_MUTATED)})))).observe(document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),{stop:function(){t&&t.disconnect()}}}var je=2*c;function Fe(e){var t=function(e){var t=e.querySelector("meta[name=dd-trace-id]"),n=e.querySelector("meta[name=dd-trace-time]");return We(t&&t.content,n&&n.content)}(e)||function(e){var t=function(e){for(var t=0;t<e.childNodes.length;t+=1){if(n=qe(e.childNodes[t]))return n}if(e.body)for(t=e.body.childNodes.length-1;t>=0;t-=1){var n,r=e.body.childNodes[t];if(n=qe(r))return n;if(!ze(r))break}}(e);if(!t)return;return We(x(t,"trace-id"),x(t,"trace-time"))}(e);if(t&&!(t.traceTime<=Date.now()-je))return t.traceId}function We(e,t){var n=t&&Number(t);if(e&&n)return{traceId:e,traceTime:n}}function qe(e){if(e&&function(e){return"#comment"===e.nodeName}(e)){var t=e.data.match(/^\s*DATADOG;(.*?)\s*$/);if(t)return t[1]}}function ze(e){return"#text"===e.nodeName}var Ge="initial_document",Ve=[[u.DOCUMENT,function(e){return Ge===e}],[u.XHR,function(e){return"xmlhttprequest"===e}],[u.FETCH,function(e){return"fetch"===e}],[u.BEACON,function(e){return"beacon"===e}],[u.CSS,function(e,t){return null!==t.match(/\.css$/i)}],[u.JS,function(e,t){return null!==t.match(/\.js$/i)}],[u.IMAGE,function(e,t){return w(["image","img","icon"],e)||null!==t.match(/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i)}],[u.FONT,function(e,t){return null!==t.match(/\.(woff|eot|woff2|ttf)$/i)}],[u.MEDIA,function(e,t){return w(["audio","video"],e)||null!==t.match(/\.(mp3|mp4)$/i)}]];function Ke(e){var t=e.name;if(!function(e){try{return!!k(e)}catch(e){return!1}}(t))return ie('Failed to construct URL for "'+e.name+'"'),u.OTHER;for(var n=function(e){var t=k(e).pathname;return"/"===t[0]?t:"/"+t}(t),r=0,i=Ve;r<i.length;r++){var o=i[r],a=o[0];if((0,o[1])(e.initiatorType,n))return a}return u.OTHER}function $e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1;n<e.length;n+=1)if(e[n-1]>e[n])return!1;return!0}function Xe(e){var t=e.duration,n=e.startTime,r=e.responseEnd;return y(0===t&&n<r?r-n:t)}function Ye(e){var t=e.startTime,n=e.fetchStart,r=e.domainLookupStart,i=e.domainLookupEnd,o=e.connectStart,a=e.secureConnectionStart,u=e.connectEnd,s=e.requestStart,c=e.responseStart,f=e.responseEnd,d=e.redirectStart,l=e.redirectEnd;if($e(t,n,r,i,o,u,s,c,f)){var p=n!==t;if(!p||(d<t&&(d=t),l<t&&(l=n),$e(t,d,l,n))){var m={download:Je(t,c,f),firstByte:Je(t,s,c)};return u!==n&&(m.connect=Je(t,o,u),$e(o,a,u)&&(m.ssl=Je(t,a,u))),i!==n&&(m.dns=Je(t,r,i)),p&&(m.redirect=Je(t,d,l)),m}}}function Je(e,t,n){return{duration:y(n-t),start:y(t-e)}}function Qe(e){if(e.startTime<e.responseStart)return e.decodedBodySize}function Ze(e,t,n){return n.isTrackedWithResource()&&e&&!P(e,t)}function et(){return void 0!==window.performance&&"getEntries"in performance}function tt(){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("navigation")}function nt(e){if(ot(e,function(){var e,t={entryType:"resource",initiatorType:Ge,traceId:Fe(document)};if(tt()&&performance.getEntriesByType("navigation").length>0){var n=performance.getEntriesByType("navigation")[0];e=r(r({},n.toJSON()),t)}else{var i=rt();e=r(r(r({},i),{decodedBodySize:0,duration:i.responseEnd,name:window.location.href,startTime:0}),t)}return e}()),et()&&it(e,performance.getEntries()),window.PerformanceObserver){var t=new PerformanceObserver(re((function(t){return it(e,t.getEntries())}))),n=["resource","navigation","longtask"];"visible"===document.visibilityState&&n.push("paint"),t.observe({entryTypes:n}),et()&&"addEventListener"in performance&&performance.addEventListener("resourcetimingbufferfull",(function(){performance.clearResourceTimings()}))}tt()||function(e){function t(){e(r(r({},rt()),{entryType:"navigation"}))}if("complete"===document.readyState)t();else{var n=re((function(){window.removeEventListener(a.LOAD,n),setTimeout(re(t))}));window.addEventListener(a.LOAD,n)}}((function(t){ot(e,t)}))}function rt(){var e={},t=performance.timing;for(var n in t)I(t[n])&&(e[n]=0===t[n]?0:t[n]-D());return e}function it(e,t){t.forEach((function(t){"resource"!==t.entryType&&"navigation"!==t.entryType&&"paint"!==t.entryType&&"longtask"!==t.entryType||ot(e,t)}))}function ot(e,t){"navigation"===t.entryType&&t.loadEventEnd<=0||e.notify(ke.PERFORMANCE_ENTRY_COLLECTED,t)}function at(e,t,n){if(void 0!==ut()&&function(e,t){for(var n=U(t),r=0,i=e.allowedTracingOrigins;r<i.length;r++){var o=i[r];if(n===o||o instanceof RegExp&&o.test(n))return!0}return!1}(e,t)){var r=new st,i=new st;return n(function(e,t){return{"x-datadog-origin":"rum","x-datadog-parent-id":t.toDecimalString(),"x-datadog-sampled":"1","x-datadog-sampling-priority":"1","x-datadog-trace-id":e.toDecimalString()}}(r,i)),{traceId:r,spanId:i}}}function ut(){return window.crypto||window.msCrypto}var st=function(){function e(){this.buffer=new Uint8Array(8),ut().getRandomValues(this.buffer),this.buffer[0]=127&this.buffer[0]}return e.prototype.toString=function(e){for(var t=this.readInt32(0),n=this.readInt32(4),r="";;){var i=t%e*4294967296+n;if(t=Math.floor(t/e),n=Math.floor(i/e),r=(i%e).toString(e)+r,!t&&!n)break}return r},e.prototype.toDecimalString=function(){return this.toString(10)},e.prototype.readInt32=function(e){return 16777216*this.buffer[e]+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]},e}(),ct=1;function ft(e){var t=[new ye,new ye],n=function(e){return{traceFetch:function(t){return at(e,t.url,(function(e){t.init=r({},t.init);var n={};t.init.headers instanceof Headers&&t.init.headers.forEach((function(e,t){n[t]=e})),t.init.headers=r(r({},n),e)}))},traceXhr:function(t,n){return at(e,t.url,(function(e){Object.keys(e).forEach((function(t){n.setRequestHeader(t,e[t])}))}))}}}(e);return function(e,t){var n=e[0],r=e[1],i=Re();i.beforeSend((function(e,r){var i=t.traceXhr(e,r);i&&(e.traceId=i.traceId,e.spanId=i.spanId),e.requestId=dt(),n.notify({requestId:e.requestId})})),i.onRequestComplete((function(e){r.notify({duration:e.duration,method:e.method,requestId:e.requestId,response:e.response,spanId:e.spanId,startTime:e.startTime,status:e.status,traceId:e.traceId,type:s.XHR,url:e.url})}))}(t,n),function(e,t){var n=e[0],r=e[1],i=de();i.beforeSend((function(e){var r=t.traceFetch(e);r&&(e.traceId=r.traceId,e.spanId=r.spanId),e.requestId=dt(),n.notify({requestId:e.requestId})})),i.onRequestComplete((function(e){r.notify({duration:e.duration,method:e.method,requestId:e.requestId,response:e.response,responseType:e.responseType,spanId:e.spanId,startTime:e.startTime,status:e.status,traceId:e.traceId,type:s.FETCH,url:e.url})}))}(t,n),t}function dt(){var e=ct;return ct+=1,e}function lt(e){if(performance&&"getEntriesByName"in performance){var t,n=performance.getEntriesByName(e.url,"resource").filter((function(t){return n=t,r=e.startTime,i=pt(e),n.startTime>=r&&pt(n)<=i;var n,r,i}));return 1===n.length?n[0]:2===n.length&&pt((t=n)[0])<=t[1].startTime?n[1]:void 0}}function pt(e){return e.startTime+e.duration}var mt="_dd",vt="_dd_r",ht="_dd_l",Et="rum",Tt="logs";var gt="_dd_s",bt=15*c,yt=4*f,Ct=c;function Ot(e,t){var n,r,i,o,u,s=(n=gt,o=!1,u=function(){o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),j)},{get:function(){return o?i:(i=W(n),u(),i)},set:function(e,t){F(n,e,t),i=e,u()}});!function(e){var t=e.get(),n=W(mt),r=W(vt),i=W(ht);if(!t){var o={};n&&(o.id=n),i&&/^[01]$/.test(i)&&(o[Tt]=i),r&&/^[012]$/.test(r)&&(o[Et]=r),St(o,e)}}(s);var c=new ye,f=wt(s).id,l=d((function(){var n=wt(s),r=t(n[e]),i=r.trackingType,o=r.isTracked;n[e]=i,o&&!n.id&&(n.id=g(),n.created=String(Date.now())),St(n,s),o&&f!==n.id&&(f=n.id,c.notify())}),j).throttled;return l(),function(e){var t=re(e),n={capture:!0,passive:!0};[a.CLICK,a.TOUCH_START,a.KEY_DOWN,a.SCROLL].forEach((function(e){document.addEventListener(e,t,n),At.push((function(){return document.removeEventListener(e,t,n)}))}))}(l),function(e){var t=re((function(){"visible"===document.visibilityState&&e()})),n=window.setInterval(t,Ct);document.addEventListener(a.VISIBILITY_CHANGE,t),At.push((function(){clearInterval(n),document.removeEventListener(a.VISIBILITY_CHANGE,t)}))}((function(){St(wt(s),s)})),{getId:function(){return wt(s).id},getTrackingType:function(){return wt(s)[e]},renewObservable:c}}var Rt=/^([a-z]+)=([a-z0-9-]+)$/,_t="&";function wt(e){var t=function(e){var t=e.get(),n={};(function(e){return void 0!==e&&(-1!==e.indexOf(_t)||Rt.test(e))})(t)&&t.split(_t).forEach((function(e){var t=Rt.exec(e);if(null!==t){var r=t[1],i=t[2];n[r]=i}}));return n}(e);return function(e){return(void 0===e.created||Date.now()-Number(e.created)<yt)&&(void 0===e.expire||Date.now()<Number(e.expire))}(t)?t:(It(e),{})}function St(e,t){if(n=e,0!==Object.keys(n).length){var n;e.expire=String(Date.now()+bt);var r=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}(e).map((function(e){return e[0]+"="+e[1]})).join(_t);t.set(r,bt)}else It(t)}function It(e){e.set("",0)}var At=[];var Dt=yt,Lt=5*c,xt=c;function Nt(e){return function(e){var t;if(function(){void 0===Bt&&(Bt="closest"in HTMLElement.prototype);return Bt}())t=e.closest("["+Mt+"]");else for(var n=e;n;){if(n.hasAttribute(Mt)){t=n;break}n=n.parentElement}if(!t)return;return qt(Wt(t.getAttribute(Mt).trim()))}(e)||Ft(e,Ht)||Ft(e,Pt)||""}var Mt="data-dd-action-name";var Ut,kt,Bt,Ht=[function(e){if(function(){void 0===kt&&(kt="labels"in HTMLInputElement.prototype);return kt}()){if("labels"in e&&e.labels&&e.labels.length>0)return zt(e.labels[0])}else if(e.id){var t=e.ownerDocument&&e.ownerDocument.querySelector('label[for="'+e.id.replace('"','\\"')+'"]');return t&&zt(t)}},function(e){if("INPUT"===e.nodeName){var t=e,n=t.getAttribute("type");if("button"===n||"submit"===n||"reset"===n)return t.value}},function(e){if("BUTTON"===e.nodeName||"LABEL"===e.nodeName||"button"===e.getAttribute("role"))return zt(e)},function(e){return e.getAttribute("aria-label")},function(e){var t=e.getAttribute("aria-labelledby");if(t)return t.split(/\s+/).map((function(t){return function(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}(e,t)})).filter((function(e){return Boolean(e)})).map(zt).join(" ")},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e){if("options"in e&&e.options.length>0)return zt(e.options[0])}],Pt=[function(e){return zt(e)}],jt=10;function Ft(e,t){for(var n=e,r=0;r<=jt&&n&&"BODY"!==n.nodeName&&"HTML"!==n.nodeName&&"HEAD"!==n.nodeName;){for(var i=0,o=t;i<o.length;i++){var a=(0,o[i])(n);if("string"==typeof a){var u=a.trim();if(u)return qt(Wt(u))}}if("FORM"===n.nodeName)break;n=n.parentElement,r+=1}}function Wt(e){return e.replace(/\s+/g," ")}function qt(e){return e.length>100?e.slice(0,100)+" [...]":e}function zt(e){if(!e.isContentEditable){if("innerText"in e){var t=e.innerText;if(!function(){if(void 0===Ut){var e=document.createElement("style");e.textContent="*";var t=document.createElement("div");t.appendChild(e),document.body.appendChild(t),Ut=""===t.innerText,document.body.removeChild(t)}return Ut}())for(var n=e.querySelectorAll("script, style"),r=0;r<n.length;r+=1){var i=n[r].innerText;i.trim().length>0&&(t=t.replace(i,""))}return t}return e.textContent}}function Gt(e,t){void 0===t&&(t=O);var n={errorCount:0,longTaskCount:0,resourceCount:0,userActionCount:0},r=[];return r.push(e.subscribe(ke.ERROR_COLLECTED,(function(){n.errorCount+=1,t(n)}))),r.push(e.subscribe(ke.AUTO_ACTION_COMPLETED,(function(){n.userActionCount+=1,t(n)}))),r.push(e.subscribe(ke.CUSTOM_ACTION_COLLECTED,(function(){n.userActionCount+=1,t(n)}))),r.push(e.subscribe(ke.PERFORMANCE_ENTRY_COLLECTED,(function(e){"longtask"===e.entryType&&(n.longTaskCount+=1,t(n))}))),r.push(e.subscribe(ke.RESOURCE_ADDED_TO_BATCH,(function(){n.resourceCount+=1,t(n)}))),{stop:function(){r.forEach((function(e){return e.unsubscribe()}))},eventCounts:n}}var Vt,Kt=100,$t=100,Xt=1e4;function Yt(e,t){var n=function(e){var t,n=new ye,r=[],i=0;function o(){n.notify({isBusy:i>0})}return r.push(e.subscribe(ke.DOM_MUTATED,(function(){return o()}))),r.push(e.subscribe(ke.PERFORMANCE_ENTRY_COLLECTED,(function(e){"resource"===e.entryType&&o()}))),r.push(e.subscribe(ke.REQUEST_STARTED,(function(e){void 0===t&&(t=e.requestId),i+=1,o()}))),r.push(e.subscribe(ke.REQUEST_COMPLETED,(function(e){void 0===t||e.requestId<t||(i-=1,o())}))),{observable:n,stop:function(){r.forEach((function(e){return e.unsubscribe()}))}}}(e),r=n.observable,i=n.stop,o=function(e,t,n){var r,i=!1,o=setTimeout(re((function(){return s(!1,0)})),Kt),a=setTimeout(re((function(){return s(!0,performance.now())})),Xt);function u(){i=!0,clearTimeout(o),clearTimeout(r),clearTimeout(a),t()}function s(e,t){i||(u(),n(e,t))}return e.subscribe((function(e){var t=e.isBusy;clearTimeout(o),clearTimeout(r);var n=performance.now();t||(r=setTimeout(re((function(){return s(!0,n)})),$t))})),{stop:u}}(r,i,t).stop;return{stop:function(){o(),i()}}}function Jt(e){var t=function(e){var t,n;return{create:function(r,i){if(!t){var o=new Zt(e,r,i);t=o,n=Yt(e,(function(e,n){e?o.complete(n):o.discard(),t=void 0}))}},discardCurrent:function(){t&&(n.stop(),t.discard(),t=void 0)}}}(e);function n(e){if(e.target instanceof Element){var n=Nt(e.target);n&&t.create(Vt.CLICK,n)}}return e.subscribe(ke.VIEW_CREATED,(function(){t.discardCurrent()})),addEventListener(a.CLICK,n,{capture:!0}),{stop:function(){t.discardCurrent(),removeEventListener(a.CLICK,n,{capture:!0})}}}!function(e){e.CLICK="click",e.CUSTOM="custom"}(Vt||(Vt={}));var Qt,Zt=function(){function e(e,t,n){this.lifeCycle=e,this.type=t,this.name=n,this.id=g(),this.startTime=performance.now(),this.eventCountsSubscription=Gt(e),this.lifeCycle.notify(ke.AUTO_ACTION_CREATED,{id:this.id,startTime:this.startTime})}return e.prototype.complete=function(e){var t=this.eventCountsSubscription.eventCounts;this.lifeCycle.notify(ke.AUTO_ACTION_COMPLETED,{duration:e-this.startTime,id:this.id,measures:{errorCount:t.errorCount,longTaskCount:t.longTaskCount,resourceCount:t.resourceCount},name:this.name,startTime:this.startTime,type:this.type}),this.eventCountsSubscription.stop()},e.prototype.discard=function(){this.lifeCycle.notify(ke.AUTO_ACTION_DISCARDED),this.eventCountsSubscription.stop()},e}();!function(e){e.INITIAL_LOAD="initial_load",e.ROUTE_CHANGE="route_change"}(Qt||(Qt={}));var en,tn,nn=3e3,rn=5*c;function on(e,t){var n,i=an(t,e,Qt.INITIAL_LOAD,document.referrer,0),o=i,u=function(e,t){var n;return{stop:e.subscribe(ke.PERFORMANCE_ENTRY_COLLECTED,(function(e){"navigation"===e.entryType?(n=r(r({},n),{domComplete:e.domComplete,domContentLoaded:e.domContentLoadedEventEnd,domInteractive:e.domInteractive,loadEventEnd:e.loadEventEnd}),t(n)):"paint"===e.entryType&&"first-contentful-paint"===e.name&&(n=r(r({},n),{firstContentfulPaint:e.startTime}),t(n))})).unsubscribe}}(t,(function(e){i.updateTimings(e),i.scheduleUpdate()})).stop;function s(){o.isDifferentView(e)?(o.triggerUpdate(),o.end(),o=an(t,e,Qt.ROUTE_CHANGE,o.url)):(o.updateLocation(e),o.triggerUpdate())}!function(e){var t=history.pushState;history.pushState=re((function(){t.apply(this,arguments),e()}));var n=history.replaceState;history.replaceState=re((function(){n.apply(this,arguments),e()})),window.addEventListener(a.POP_STATE,re(e))}(s),n=s,window.addEventListener("hashchange",re(n)),t.subscribe(ke.SESSION_RENEWED,(function(){o.end(),o=an(t,e,Qt.ROUTE_CHANGE,o.url)})),t.subscribe(ke.BEFORE_UNLOAD,(function(){o.triggerUpdate(),o.end()}));var c=window.setInterval(re((function(){o.triggerUpdate()})),rn);return{stop:function(){u(),o.end(),clearInterval(c)}}}function an(e,t,n,i,o){void 0===o&&(o=performance.now());var a,u,s,c=g(),f={errorCount:0,longTaskCount:0,resourceCount:0,userActionCount:0},l=0,p=r({},t);e.notify(ke.VIEW_CREATED,{id:c,startTime:o,location:p,referrer:i});var m=d(re(O),nn,{leading:!1}),v=m.throttled,h=m.cancel,E=Gt(e,(function(e){f=e,v()})).stop,T=function(e,t){var n=e===Qt.INITIAL_LOAD,r=!0,i=[];function o(){!r&&!n&&i.length>0&&t(Math.max.apply(Math,i))}return{setLoadEventEnd:function(e){n&&(n=!1,i.push(e),o())},setActivityLoadingTime:function(e){r&&(r=!1,void 0!==e&&i.push(e),o())}}}(n,(function(e){u=e,v()})),b=T.setActivityLoadingTime,y=T.setLoadEventEnd,C=function(e,t){var n=performance.now();return{stop:Yt(e,(function(e,r){t(e?r-n:void 0)})).stop}}(e,b).stop;function O(){l+=1,e.notify(ke.VIEW_UPDATED,{documentVersion:l,id:c,loadingTime:u,loadingType:n,location:p,referrer:i,startTime:o,duration:(void 0===s?performance.now():s)-o,measures:r(r({},a),f)})}return(O(),{scheduleUpdate:v,end:function(){s=performance.now(),E(),C()},isDifferentView:function(e){return p.pathname!==e.pathname||(t=e.hash,n=t.substr(1),!document.getElementById(n)&&e.hash!==p.hash);var t,n},triggerUpdate:function(){h(),O()},updateTimings:function(e){a=e,void 0!==e.loadEventEnd&&y(e.loadEventEnd)},updateLocation:function(e){p=r({},e)},get url(){return p.href}})}function un(e,t,n,i,o,a){var c={},f=function(e,t){var n,r,i,o=[],a=[];e.subscribe(ke.VIEW_CREATED,(function(e){n&&o.unshift({context:c(),endTime:e.startTime,startTime:n.startTime}),n=e,i=t.getId()})),e.subscribe(ke.VIEW_UPDATED,(function(e){n.id===e.id&&(n=e)})),e.subscribe(ke.AUTO_ACTION_CREATED,(function(e){r=e})),e.subscribe(ke.AUTO_ACTION_COMPLETED,(function(e){r&&a.unshift({context:f(),endTime:r.startTime+e.duration,startTime:r.startTime}),r=void 0})),e.subscribe(ke.AUTO_ACTION_DISCARDED,(function(){r=void 0})),e.subscribe(ke.SESSION_RENEWED,(function(){o=[],a=[],n=void 0,r=void 0}));var u=window.setInterval(re((function(){s(o,Dt),s(a,Lt)})),xt);function s(e,t){for(var n=performance.now()-t;e.length>0&&e[e.length-1].startTime<n;)e.pop()}function c(){return{sessionId:i,view:{id:n.id,referrer:n.referrer,url:n.location.href}}}function f(){return{userAction:{id:r.id}}}function d(e,t,n,r){if(void 0===r)return n?e():void 0;if(n&&r>=n.startTime)return e();for(var i=0,o=t;i<o.length;i++){var a=o[i];if(r>a.endTime)break;if(r>=a.startTime)return a.context}}return{findAction:function(e){return d(f,a,r,e)},findView:function(e){return d(c,o,n,e)},stop:function(){window.clearInterval(u)}}}(n,o);a.setExternalContextProvider((function(){return h({application_id:e},f.findView(),c)}));var d=function(e,t){var n,r=o(e.rumEndpoint),i=e.replica;void 0!==i&&(n=o(i.rumEndpoint));function o(n){return new J(new X(n,e.batchBytesLimit,!0),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout,(function(){return t.notify(ke.BEFORE_UNLOAD)}))}function a(e){return h(e,{application_id:i.applicationId})}var u=!1;return{add:function(e){u||(r.add(e),n&&n.add(a(e)))},stop:function(){u=!0},upsert:function(e,t){u||(r.upsert(e,t),n&&n.upsert(a(e),t))}}}(i,n),l=function(e,t,n,r){return function(i,o){return function(a,u,s){var c=e.findView(a);if(t.isTracked()&&c&&c.sessionId){var f=e.findAction(a),d=i(u,{action:f,view:c,rum:n()}),l=h(r(),s,C(d));o(l,d)}}}}(f,o,(function(){return{applicationId:e,date:(new Date).getTime(),session:{type:void 0===window._DATADOG_SYNTHETICS_BROWSER?tn.USER:tn.SYNTHETICS}}}),(function(){return c}));return function(e,t,n,i,o){var a=function(e,t){var n=t.view;return E(t.rum,n,e)},c=function(e,t){var n=t.view,r=t.action;return E(t.rum,n,r,e)};(function(e,t){e.subscribe(ke.VIEW_UPDATED,(function(e){t(e.startTime,{date:A(e.startTime),duration:y(e.duration),evt:{category:en.VIEW},rum:{documentVersion:e.documentVersion},view:{loadingTime:y(e.loadingTime),loadingType:e.loadingType,measures:r(r({},e.measures),{domComplete:y(e.measures.domComplete),domContentLoaded:y(e.measures.domContentLoaded),domInteractive:y(e.measures.domInteractive),firstContentfulPaint:y(e.measures.firstContentfulPaint),loadEventEnd:y(e.measures.loadEventEnd)})}})}))})(t,i(a,(function(e,t){return o.upsert(e,t.view.id)}))),function(e,t){e.subscribe(ke.ERROR_COLLECTED,(function(e){var n=e.message,i=e.startTime,o=e.context;t(i,r({message:n,date:A(i),evt:{category:en.ERROR}},o))}))}(t,i(c,o.add)),function(e,t,n,r){t.subscribe(ke.REQUEST_COMPLETED,(function(i){if(Ze(i.url,e,n)){var o=lt(i),a=i.type===s.XHR?u.XHR:u.FETCH,c=o?o.startTime:i.startTime;r(c,{_dd:i.traceId&&i.spanId?{spanId:i.spanId.toDecimalString(),traceId:i.traceId.toDecimalString()}:void 0,date:A(c),duration:o?Xe(o):y(i.duration),evt:{category:en.RESOURCE},http:{method:i.method,performance:o?Ye(o):void 0,statusCode:i.status,url:i.url},network:{bytesWritten:o?Qe(o):void 0},resource:{kind:a}}),t.notify(ke.RESOURCE_ADDED_TO_BATCH)}}))}(e,t,n,i(c,o.add)),function(e,t,n,r){t.subscribe(ke.PERFORMANCE_ENTRY_COLLECTED,(function(i){switch(i.entryType){case"resource":!function(e,t,n,r,i){if(!Ze(i.name,e,n))return;var o=Ke(i);if(w([u.XHR,u.FETCH],o))return;r(i.startTime,{_dd:i.traceId?{traceId:i.traceId}:void 0,date:A(i.startTime),duration:Xe(i),evt:{category:en.RESOURCE},http:{performance:Ye(i),url:i.name},network:{bytesWritten:Qe(i)},resource:{kind:o}}),t.notify(ke.RESOURCE_ADDED_TO_BATCH)}(e,t,n,r,i);break;case"longtask":!function(e,t){e(t.startTime,{date:A(t.startTime),duration:y(t.duration),evt:{category:en.LONG_TASK}})}(r,i)}}))}(e,t,n,i(c,o.add)),function(e,t){e.subscribe(ke.CUSTOM_ACTION_COLLECTED,(function(e){t(performance.now(),{evt:{category:en.USER_ACTION,name:e.name},userAction:{type:e.type}},e.context)}))}(t,i(a,o.add)),function(e,t){e.subscribe(ke.AUTO_ACTION_COMPLETED,(function(e){t(e.startTime,{date:A(e.startTime),duration:y(e.duration),evt:{category:en.USER_ACTION,name:e.name},userAction:{id:e.id,measures:e.measures,type:e.type}})}))}(t,i(a,o.add))}(i,n,o,l,d),on(t,n),{globalApi:{addRumGlobalContext:re((function(e,t){c[e]=t})),addUserAction:re((function(e,t){n.notify(ke.CUSTOM_ACTION_COLLECTED,{context:t,name:e,type:Vt.CUSTOM})})),getInternalContext:re((function(t){var n=f.findView(t);if(o.isTracked()&&n&&n.sessionId)return C(h({applicationId:e},n,f.findAction(t)))})),setRumGlobalContext:re((function(e){c=e}))},stop:function(){d.stop()}}}!function(e){e.USER_ACTION="user_action",e.ERROR="error",e.LONG_TASK="long_task",e.VIEW="view",e.RESOURCE="resource"}(en||(en={})),function(e){e.SYNTHETICS="synthetics",e.USER="user"}(tn||(tn={}));var sn,cn="rum";function fn(e,t){var n=Ot(cn,(function(t){return function(e,t){var n;n=function(e){return e===sn.NOT_TRACKED||e===sn.TRACKED_WITH_RESOURCES||e===sn.TRACKED_WITHOUT_RESOURCES}(t)?t:b(e.sampleRate)?b(e.resourceSampleRate)?sn.TRACKED_WITH_RESOURCES:sn.TRACKED_WITHOUT_RESOURCES:sn.NOT_TRACKED;return{trackingType:n,isTracked:dn(n)}}(e,t)}));return n.renewObservable.subscribe((function(){t.notify(ke.SESSION_RENEWED)})),{getId:n.getId,isTracked:function(){return void 0!==n.getId()&&dn(n.getTrackingType())},isTrackedWithResource:function(){return void 0!==n.getId()&&n.getTrackingType()===sn.TRACKED_WITH_RESOURCES}}}function dn(e){return e===sn.TRACKED_WITH_RESOURCES||e===sn.TRACKED_WITHOUT_RESOURCES}!function(e){e.NOT_TRACKED="0",e.TRACKED_WITH_RESOURCES="1",e.TRACKED_WITHOUT_RESOURCES="2"}(sn||(sn={}));var ln=pn({init:function(e){De("core.init")},addRumGlobalContext:function(e,t){De("addRumGlobalContext")},setRumGlobalContext:function(e){De("setRumGlobalContext")},addUserAction:function(e,t){De("addUserAction")},getInternalContext:function(e){De("getInternalContext")}});function pn(e){var t=function(e){var t=r({},e);return Object.defineProperty(t,"_setDebug",{get:function(){return ue},enumerable:!1}),t}(e),n=!1;return t.init=re((function(e){if(Me()&&Ue()&&function(e){if(n)return e.silentMultipleInit||console.error("DD_RUM is already initialized."),!1;if(!e||!e.clientToken&&!e.publicApiKey)return console.error("Client Token is not configured, we will not send any data."),!1;if(!e.applicationId)return console.error("Application ID is not configured, no RUM data will be collected."),!1;if(void 0!==e.sampleRate&&!S(e.sampleRate))return console.error("Sample Rate should be a number between 0 and 100"),!1;if(void 0!==e.resourceSampleRate&&!S(e.resourceSampleRate))return console.error("Resource Sample Rate should be a number between 0 and 100"),!1;if(Array.isArray(e.allowedTracingOrigins)&&0!==e.allowedTracingOrigins.length&&void 0===e.service)return console.error("Service need to be configured when tracing is enabled"),!1;return!0}(e)){e.publicApiKey&&(e.clientToken=e.publicApiKey);var i=r(r({},e),{isCollectingError:!0}),o=new He,a=Ne(i,Be),u=a.errorObservable,s=a.configuration,c=a.internalMonitoring,f=fn(s,o),d=un(i.applicationId,location,o,s,f,c).globalApi,l=ft(s),p=l[0],m=l[1];nt(o),Pe(o),s.trackInteractions&&Jt(o),u.subscribe((function(e){return o.notify(ke.ERROR_COLLECTED,e)})),p.subscribe((function(e){return o.notify(ke.REQUEST_STARTED,e)})),m.subscribe((function(e){return o.notify(ke.REQUEST_COMPLETED,e)})),T(t,d),n=!0}})),t}(function(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}()).DD_RUM=ln}]);